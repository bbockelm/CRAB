#! /bin/sh
#
# Stefano Lacaprara  <lacaprara@pd.infn.it>  INFN Padova
#
# Installation script for Crab and Boss
#
# 14-Sep-2005

#echo tar xzvf Crab_1_0_0.tgz
#echo cd Crab_1_0_0

# Struttura subdir:
# top/bin
#    /lib
#    /python
#    /script

TopDir=`\pwd`

cat > crab.sh <<EOF
#! /bin/sh
# CRAB related Stuff
export CRABDIR=$TopDir

CRABPATH=\${CRABDIR}/bin
CRABLIBS=\${CRABDIR}/lib
CRABPYTHON=\${CRABDIR}/python
CRABSCRIPT=\${CRABDIR}/script

# BOSS related Stuff
export BOSSDIR=$TopDir
BOSSLIBS=\${BOSSDIR}/lib

if [ -z "\$PATH" ]; then
   export PATH=\${CRABPATH}
else
   export PATH=\${CRABPATH}:\${PATH}
fi
# if [ -z "\$LD_LIBRARY_PATH" ]; then
#    export LD_LIBRARY_PATH=\${BOSSLIBS}
# else
#    export LD_LIBRARY_PATH=\${BOSSLIBS}:\${LD_LIBRARY_PATH}
# fi
if [ -z "\$PYTHONPATH" ]; then
   export PYTHONPATH=\${CRABPYTHON}
else
   export PYTHONPATH=\${CRABPYTHON}:\${PYTHONPATH}
fi
EOF

# csh style
cat > crab.csh <<EOF
#! /bin/csh
# CRAB related Stuff
setenv CRABDIR $TopDir

set CRABPATH=\${CRABDIR}/bin
set CRABLIBS=\${CRABDIR}/lib
set CRABPYTHON=\${CRABDIR}/python

# BOSS related Stuff
setenv BOSSDIR $TopDir
set BOSSLIBS=\${BOSSDIR}/lib

if ( ! \$?path ) then
   set path=\${CRABPATH}
else
   set path=( \${CRABPATH} \${path} )
endif
# if ( ! \$?LD_LIBRARY_PATH ) then
#    setenv LD_LIBRARY_PATH \${BOSSLIBS}
# else
#    setenv LD_LIBRARY_PATH \${BOSSLIBS}:\${LD_LIBRARY_PATH}
# endif
if ( ! \$?PYTHONPATH ) then
   setenv PYTHONPATH \${CRABPYTHON}
else
   setenv PYTHONPATH \${CRABPYTHON}:\${PYTHONPATH}
endif
EOF

echo "Creating ${HOME}/.MySQLRTConfig.clad"
cat > ${HOME}/.MySQLRTConfig.clad <<EOF
# This is the BOSS MySQL Database configuration file

[
# BOSS MySQL database file
DB_NAME = "boss_rt_v3_6";

# Host where the MySQL server is running
DB_HOST = "boss.bo.infn.it";
DB_DOMAIN = "bo.infn.it";

# Default BOSS MySQL user and password
DB_USER = "BOSSv3_6manager";
DB_USER_PW = "BossMySQL";

# Guest BOSS MySQL user and password
DB_GUEST = "BOSSv3_6monitor";
DB_GUEST_PW = "BossMySQL";

# MySQL table type
TABLE_TYPE = "";

# MySQL port
DB_PORT = 0;

# MySQL socket
DB_SOCKET = "";

# MySQL client flag
DB_CLIENT_FLAG = 0;
]
EOF
